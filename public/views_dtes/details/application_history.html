<navbar></navbar>
<div class="container-fluid">
	<div class="row">
		<menuleft></menuleft>
		<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
			
			<div class="row page-header">
				<div class="col-sm-5">
					<h1 class="no-margin">Historial de aplicaciones</h1>
				</div>
				<!-- <div class="col-sm-7">					
					<form class=" navbar-form navbar-left" role="search">
					  <div class="input-group">
						  <input type="text" class="form-control" placeholder="Buscar">
						  <div class="input-group-btn">
							    <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
						  </div>
					  </div>
					</form>					
				</div> -->
			</div>
			<div class="row">
				<div class="col-xs-4">																								
				    <div class="input-group" ng-class="initial_date_obj ? '' : 'has-error'">
				    	<span class="input-group-addon">Fecha inicial</span>						      				    	
				    	<input type="text" class="form-control" ng-model="initial_date_obj" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" clear-text="Borrar" current-text="Actual" close-text="Cerrar"/>
				    	<span class="input-group-btn">
					        <button type="button" ng-class="initial_date_obj ? '' : 'btn-danger'" class="btn" ng-click="popup1.opened = !popup1.opened">
					        	<i class="glyphicon glyphicon-calendar"></i>
					        </button>
					    </span><!-- /btn-group -->						      					    										
					</div>										
				</div>
				<div class="col-xs-4">																				
				    <div class="input-group" ng-class="final_date_obj ? '' : 'has-error'">	
				    	<span class="input-group-addon">Fecha final</span>					      				    	
				    	<input type="text" class="form-control" ng-model="final_date_obj" uib-datepicker-popup="{{format}}" alt-input-formats="altInputFormats" is-open="popup2.opened" datepicker-options="{minDate: initial_date_obj}" ng-required="true" clear-text="Borrar" current-text="Actual" close-text="Cerrar"/>				    	
				    	<span class="input-group-btn">
					        <button type="button" ng-class="final_date_obj ? '' : 'btn-danger'" class="btn" ng-click="popup2.opened = !popup2.opened">
					        	<i class="glyphicon glyphicon-calendar"></i>
					        </button>
					    </span><!-- /btn-group -->						      
				    </div><!-- /input-group -->											
				</div>								

				<div class="col-xs-4" ng-show="initial_date_obj">
				    <button class="btn btn-default" ng-click="getApplications(initial_date_obj,final_date_obj)">Enviar</button>											
				</div>
			</div>						
			
			<br>
			
			<div uib-alert ng-repeat="alert in alerts" ng-class="'alert-' + (alert.type || 'warning')" close="closeAlert($index)" dismiss-on-timeout="3000">{{alert.msg}}</div>
			
			<div class="row table-responsive" ng-show="applications.length > 0">
	            <table class="table table-hover">
	              <thead>
	                <tr>
	                  <th>#</th>
	                  <th>Estado</th>
	                  <th>Ciudad</th>
	                  <th>Escuela</th>
	                  <th>Producto</th>
	                  <th>Inicio de registro</th>
	                  <th>Cierre de registro</th>
	                  <th>Fecha de aplicaci√≥n</th>
	                  <th class="text-center">Candidatos Registrados</th>	                  
	                  <th></th>
	                </tr>
	              </thead>
	              <tbody>
	                <tr ng-repeat="application in applications">
	                  <td>{{$index + 1}}</td>
	                  <td>{{application.venue.state.name}}</td>
	                  <td>{{application.venue.city.name}}</td>
	                  <td>{{application.venue.school}}</td>
	                  <td>{{application.product.name}}</td>	                  
	                  <td>{{application.initial_registration_date}}</td>
	                  <td>{{application.final_registration_date}}</td>
	                  <td>{{application.application_date}}</td>
	                  <td class="text-center">{{application.registered_candidates}}</td>
	                  <td>{{application.agreement}}</td>
	                  <td>
	                  	<a href="./application-details/{{application.id}}" type="button" class="btn btn-primary">
	                  		<span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>
	                		&nbsp;Detalles
	                  	</a>
	                  </td>	                  
	                </tr>               
	              </tbody>
	            </table>                    
	          </div>			
		</div>
	</div>
</div>