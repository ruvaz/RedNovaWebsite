<navbar></navbar>
<div class="container-fluid">
	<div class="row">
		<menuleft></menuleft>
		<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
			
			<div class="row page-header">
				<div class="col-sm-12">
					<div class="col-sm-3">
						<h1 class="no-margin">
							Estados
							<span class="badge">{{states.length}}</span> 										
						</h1>					
					</div>
					<div class="col-sm-5">
						<input type="text" class="form-control" ng-model="search.name" ng-change="search.name = search.name.toUpperCase()" placeholder="Nombre del estado"/>
					</div>
				</div>
			</div>
			
			<div uib-alert ng-repeat="alert in alerts" ng-class="'alert-' + (alert.type || 'warning')" close="closeAlert($index)" dismiss-on-timeout="3000">{{alert.msg}}</div>
			
			<div class="panel panel-default" ng-repeat="state in states | filter:search:strict">
				<!-- Default panel contents -->
								
				<div class="panel-heading">
					<div class="row">
						<div class="col-sm-12">
							<div class="col-sm-2">
								{{state.name}}	
							</div>							
							<div class="col-sm-2">
								<span class="">Ciudades&nbsp;&nbsp;</span>
								<span class="badge">{{state.cities.length}}  </span>	
							</div>
							<div class="col-sm-3" ng-show="state.show">
								<input class="form-control" ng-model="search_city.name" placeholder="Nombre de la ciudad">			
							</div>									
							<i class="pull-right glyphicon ng-scope glyphicon-chevron-right" ng-class="state.show ?'glyphicon-chevron-down':'glyphicon-chevron-right'" ng-click="state.show =! state.show" style="cursor: pointer"></i>												
						</div>
					</div>																											
				</div>
				
				<!-- List group -->
				<ul class="list-group"  ng-show="state.show">
					<li class="list-group-item" ng-repeat="city in state.cities | filter:search_city:strict">
						<div class="row">							
							<div class="col-sm-12">
								<p class="panel-heading">
									<div class="row">
										<div class="col-sm-12">
											<div class="col-sm-3">
												{{$index + 1}}.&nbsp;{{city.name}}			
											</div>																																	
											<div class="col-sm-1 pull-right">
												<span>Sedes&nbsp;&nbsp;</span>
												<span class="badge">{{city.venues.length}}</span>													
											</div>
										</div>
									</div>																		
								</p>
								<div ng-show="city.venues.length > 0" class="col-sm-11 pull-right">								  																									
									<ul class="list-group">																		
										<div class="table-responsive">
								            <table class="table table-hover">
								              <thead>
								                <tr class="">
								                  <th>#</th>
								                  <th>Escuela</th>				                  
								                  <th>Domicilio</th>
								                  <th>Contacto</th>
								                  <th>Correo electrónico</th>
								                  <th>Teléfono</th>
								                </tr>
								              </thead>
								              <tbody>
								                <tr ng-repeat="venue in city.venues">
								                  <td>{{$index + 1}}</td>
								                  <td>{{venue.school}}</td>
								                  <td>{{venue.address}}</td>
								                  <td>{{venue.contact}}</td>
								                  <td>{{venue.email}}</td>
								                  <td>{{venue.phone}}</td>
								                </tr>               
								              </tbody>
								            </table>                    
								       </div>								    	
									</ul>
								</div>
							</div>							
						</div>		
					</li>	
				</ul>
			</div>			
		</div>
	</div>
</div>